(()=>{var w=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var f=w(()=>{(function(){if(!("serviceWorker"in navigator))return;let r="./service-worker.js",l="periodic-background-sync",a="mc-periodic-sync-permission-probe",u=24*60*60*1e3,n=null,v=()=>{if(typeof window=="undefined"||!window.location)return r;try{return new URL(r,window.location.href).href}catch(e){return console.warn("Failed resolving service worker URL",e),r}},y=async e=>{var d;if(!e||!("permissions"in navigator)||typeof((d=navigator.permissions)==null?void 0:d.query)!="function"||!("periodicSync"in e))return;let i;try{i=await navigator.permissions.query({name:l})}catch(o){console.warn("Periodic sync permission query failed",o);return}if(!(!i||i.state==="granted"||i.state==="denied"))try{await e.periodicSync.register(a,{minInterval:u}),await e.periodicSync.unregister(a)}catch(o){console.warn("Periodic sync permission request failed",o)}},s=async()=>n||(n=navigator.serviceWorker.ready.then(e=>(y(e),e)).catch(e=>(console.warn("Waiting for service worker ready failed",e),n=null,null)),n),c=async()=>{try{if(!await navigator.serviceWorker.getRegistration()){let i=v();await navigator.serviceWorker.register(i)}await s()}catch(e){console.warn("SW registration failed",e)}};document.readyState==="complete"?c():window.addEventListener("load",c,{once:!0}),typeof navigator.serviceWorker.addEventListener=="function"&&navigator.serviceWorker.addEventListener("controllerchange",()=>{n=null,s()})})()});f();})();
