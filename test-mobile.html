<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memory Cue Test (No Firebase)</title>
  <style>
    body { padding: 20px; font-family: Arial, sans-serif; }
    button { margin: 5px; padding: 10px; }
    input { margin: 5px; padding: 5px; }
    #output { margin-top: 20px; border: 1px solid #ccc; padding: 10px; }
  </style>
</head>
<body>
  <h1>Test Mobile.html Event Bindings</h1>
  
  <!-- Elements that exist in mobile.html -->
  <input id="q" placeholder="Search" />
  <button id="voiceBtn">üéôÔ∏è</button>
  <button id="addQuickBtn">+</button>
  <button id="saveBtn">Save</button>
  <button id="openSettings">Settings</button>
  <select id="sort"><option>Smart sort</option></select>
  
  <!-- Simulate missing elements by using wrong IDs -->
  <div id="output"></div>

  <script>
    // Helper function for safe event binding
    function on(el, evt, handler) {
      if (!el) {
        console.warn(`MemoryCue: Element is null/undefined, skipping event binding for '${evt}'`);
        return;
      }
      el.addEventListener(evt, handler);
    }

    const $ = (sel) => document.querySelector(sel);
    const output = $('#output');
    
    // Test actual selectors from mobile.html
    const q = $('#q');
    const voiceBtn = $('#voiceBtn');
    const addQuickBtn = $('#addQuickBtn');
    const saveBtn = $('#saveBtn');
    const openSettings = $('#openSettings');
    const sortSel = $('#sort');
    
    // Test missing elements (simulate corrupted DOM)
    const missingTitle = $('#title'); // doesn't exist
    const missingNotifBtn = $('#notifBtn'); // doesn't exist
    
    function log(msg) {
      output.innerHTML += msg + '<br>';
    }

    // Bind events using our helper (simulating mobile.html bindings)
    on(q, 'input', () => log('Search input changed'));
    on(voiceBtn, 'click', () => log('Voice button clicked'));
    on(addQuickBtn, 'click', () => log('Add quick button clicked'));
    on(saveBtn, 'click', () => log('Save button clicked'));
    on(openSettings, 'click', () => log('Settings button clicked'));
    on(sortSel, 'change', () => log('Sort selection changed'));
    
    // Test missing elements (should warn, not crash)
    on(missingTitle, 'input', () => log('Title input changed'));
    on(missingNotifBtn, 'click', () => log('Notification button clicked'));

    // Console marker for debugging
    console.log('MemoryCue: bindings initialized');
    
    log('Test page loaded. Try clicking buttons or check console for warnings.');
  </script>
</body>
</html>