<!DOCTYPE html>
<html lang="en" class="h-full scroll-smooth" data-theme="system">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memory Cue</title>

  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="icons/icon-192.png" sizes="192x192" />
  <meta name="theme-color" content="#10b981" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">

  <style>
    /* Your existing Tailwind / other styles here */
  </style>
</head>
<body class="h-full bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-50">
  <div class="flex h-full flex-col">
    <header class="px-4 pt-safe-top pb-2 bg-brand-600 text-white">
      <div class="flex items-center justify-between">
        <h1 class="text-xl font-semibold">Memory Cue</h1>
        <div class="flex items-center gap-2" role="tablist">
          <button id="remindersTabBtn" role="tab" aria-controls="panel-reminders" aria-selected="true" class="p-2">
            Reminders
          </button>
          <button id="notebookTabBtn" role="tab" aria-controls="panel-notebook" aria-selected="false" class="p-2">
            Notebook
          </button>
          <button id="settingsTabBtn" role="tab" aria-controls="panel-settings" aria-selected="false" aria-label="Settings" class="p-2">
            <!-- Cog Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902
                0l.518 1.596a1 1 0 0 0 .95.69h1.692c.969
                0 1.372 1.24.588 1.81l-1.37 1a1 1 0 0 0-.364
                1.118l.518 1.596c.3.921-.755
                1.688-1.54 1.118l-1.37-1a1 1 0
                0 0-1.176 0l-1.37 1c-.785.57-1.84-.197-1.54-1.118l.518-1.596a1
                1 0 0 0-.364-1.118l-1.37-1c-.784-.57-.38-1.81.588-1.81h1.692a1
                1 0 0 0 .95-.69l.518-1.596z" />
              <path stroke-linecap="round" stroke-linejoin="round"
                stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </button>
        </div>
      </div>
    </header>

    <main class="flex flex-1 overflow-y-auto p-4">
      <div id="panel-reminders" class="panel">
        <!-- Reminders content -->
        <div class="rounded-2xl bg-white/80 p-5 dark:bg-slate-900/60">
          <label class="block mb-3">
            <span class="block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">Reminder text</span>
            <input type="text" id="reminderText" class="block w-full rounded-xl border-slate-300/60
                   bg-white/80 px-3 py-2 focus:ring-2 focus:ring-slate-900/20 outline-none dark:bg-slate-900/60"
                   placeholder="What do you need to remember?" />
          </label>
          <div class="grid grid-cols-2 gap-3 mb-3">
            <label class="block">
              <span class="block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">Date</span>
              <input type="date" id="date" class="block w-full rounded-xl border-slate-300/60
                     bg-white/80 px-3 py-2 focus:ring-2 focus:ring-slate-900/20 outline-none dark:bg-slate-900/60" />
            </label>
            <label class="block">
              <span class="block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">Time</span>
              <input type="time" id="time" class="block w-full rounded-xl border-slate-300/60
                     bg-white/80 px-3 py-2 focus:ring-2 focus:ring-slate-900/20 outline-none dark:bg-slate-900/60" />
            </label>
          </div>
          <div class="mb-3">
            <label class="inline-flex items-center">
              <input type="checkbox" id="favorite" class="rounded text-brand-600 focus:ring-brand-500" />
              <span class="ml-2 text-sm text-slate-700 dark:text-slate-200">Favorite</span>
            </label>
          </div>
          <div class="flex gap-2">
            <button id="saveReminder" class="flex-1 rounded-xl bg-brand-600 text-white px-4 py-2 hover:bg-brand-700 focus-visible:outline
                    focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-700">Save Reminder</button>
            <button id="cancelReminder" class="flex-1 rounded-xl ring-1 ring-slate-300/60 bg-white px-4 py-2 hover:bg-slate-50 dark:bg-slate-900
                    dark:ring-white/10">Cancel</button>
          </div>
          <div class="mt-4">
            <button id="voiceBtn" class="inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-300/60 bg-white px-4 py-2 hover:bg-slate-50 dark:bg-slate-900
                    dark:ring-white/10">
              ðŸŽ¤ Voice
            </button>
            <p class="text-xs text-slate-500 mt-1">
              Try: <em>mtl exercise tomorrow 6:30am #hpe</em>
            </p>
          </div>
        </div>
      </div>

      <div id="panel-notebook" class="panel hidden">
        <!-- Notebook content -->
      </div>

      <div id="panel-settings" class="panel hidden">
        <section id="settingsSection" class="py-8">
          <h2 class="text-2xl font-semibold tracking-tight mb-4">Settings</h2>

          <details class="rounded-2xl ring-1 ring-black/5 bg-white/80 p-5 dark:bg-slate-900/60 dark:ring-white/10" open>
            <summary class="cursor-pointer list-none font-medium mb-3">
              <span class="inline-flex items-center gap-2">
                <!-- cloud sync icon -->
                <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round"
                  stroke-width="1.5" d="M3 15.75A4.5 4.5 0 0 0 7.5 20.25H18a3.75 3.75 0 0 0 .495-7.468A6 6 0 0 0 7.5 7.5a5.25 5.25 0 0 0-4.5 8.25Z"/></svg>
                Sync
              </span>
            </summary>
            <label class="block mb-3">
              <span class="block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">Apps Script Sync URL</span>
              <input id="syncUrl" type="url" placeholder="https://script.google.com/macros/s/â€¦/exec"
                     class="block w-full rounded-xl border-slate-300/60 bg-white/80 px-3 py-2 focus:ring-2 focus:ring-slate-900/20 outline-none dark:bg-slate-900/60" />
            </label>
            <div class="flex flex-wrap items-center gap-2">
              <button id="saveSettings" class="inline-flex items-center gap-2 rounded-xl bg-brand-600 text-white px-4 py-2 hover:bg-brand-700 focus-visible:outline
                      focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-700">Save</button>
              <button id="testSync" class="inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-300/60 bg-white px-4 py-2 hover:bg-slate-50 dark:bg-slate-900 dark:ring-white/10">Test</button>
              <button id="syncAllBtn" class="inline-flex items-center gap-2 rounded-xl bg-accent-500 text-white px-4 py-2 focus-visible:outline
                      focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-900">Sync All Now</button>
            </div>
          </details>

          <details class="mt-6 rounded-2xl ring-1 ring-black/5 bg-white/80 p-5 dark:bg-slate-900/60 dark:ring-white/10">
            <summary class="cursor-pointer list-none font-medium mb-3">
              <span class="inline-flex items-center gap-2">
                <!-- export/import icon -->
                <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M3.75 3.75h16.5v10.5H15L12 18l-3-3.75H3.75z"/>
                </svg>
                Export / Import
              </span>
            </summary>
            <div class="flex flex-wrap items-center gap-2">
              <input id="importFile" type="file" accept="application/json" class="hidden" />
              <button id="copyMtlBtn" class="inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-300/60 bg-white px-4 py-2 hover:bg-slate-50 dark:bg-slate-900 dark:ring-white/10">Copy MTL</button>
              <button id="exportBtn" class="inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-300/60 bg-white px-4 py-2 hover:bg-slate-50 dark:bg-slate-900 dark:ring-white/10">Export</button>
            </div>
          </details>

          <details class="mt-6 rounded-2xl ring-1 ring-black/5 bg-white/80 p-5 dark:bg-slate-900/60 dark:ring-white/10">
            <summary class="cursor-pointer list-none font-medium mb-3">
              <span class="inline-flex items-center gap-2">
                <!-- mail icon -->
                <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="m2.25 6.75 9.75 7.5 9.75-7.5M3 6.75h18v10.5H3z"/>
                </svg>
                Daily Email
              </span>
            </summary>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <label class="block">
                <span class="block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">Email address</span>
                <input id="emailAddress" type="email" class="block w-full rounded-xl border-slate-300/60 bg-white/80 px-3 py-2 focus:ring-2 focus:ring-slate-900/20 outline-none dark:bg-slate-900/60" placeholder="teacher@example.edu.au" />
              </label>
            </div>
            <div class="mt-3 flex items-center gap-2">
              <button id="saveEmail" class="inline-flex items-center gap-2 rounded-xl bg-brand-600 text-white px-4 py-2 hover:bg-brand-700 focus-visible:outline
                      focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-700">Save Email</button>
              <button id="testEmail" class="inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-300/60 bg-white px-4 py-2 hover:bg-slate-50 dark:bg-slate-900 dark:ring-white/10">Send Now</button>
            </div>
          </details>
        </section>
      </div>
    </main>

    <div id="syncStatus" role="status" aria-live="polite" class="mt-3 px-4 text-sm text-slate-500">
      Ready.
    </div>

    <footer class="px-4 py-3 text-center text-xs text-slate-500">
      &copy; <span id="year"></span> Memory Cue
    </footer>
  </div>

  <script>
    // Set the footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Tab logic (Reminders / Notebook / Settings)
    const panels = {
      reminders: document.getElementById('panel-reminders'),
      notebook: document.getElementById('panel-notebook'),
      settings: document.getElementById('panel-settings')
    };
    const tabs = {
      reminders: document.getElementById('remindersTabBtn'),
      notebook: document.getElementById('notebookTabBtn'),
      settings: document.getElementById('settingsTabBtn')
    };
    function setActive(panel) {
      Object.values(panels).forEach(p => p.classList.add('hidden'));
      panels[panel].classList.remove('hidden');
      Object.keys(tabs).forEach(t => {
        tabs[t].setAttribute('aria-selected', t === panel ? 'true' : 'false');
      });
    }

    document.getElementById('remindersTabBtn').addEventListener('click', () => setActive('reminders'));
    document.getElementById('notebookTabBtn').addEventListener('click', () => setActive('notebook'));
    document.getElementById('settingsTabBtn').addEventListener('click', () => setActive('settings'));

    // Service Worker registration
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js').catch(console.error);
    }
  </script>
</body>
</html>
