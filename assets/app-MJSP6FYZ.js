import{a as tt,b as zt,c as ae,d as Qt}from"./chunk-BX4XZSMI.js";import{a as et,b as Yt}from"./chunk-MG4MJA24.js";import"./chunk-KX65DZXT.js";import{b as Ze,c as Wt}from"./chunk-GUVSRPRW.js";function it(e,t=document){return!Array.isArray(e)||!t||typeof t.getElementById!="function"?[]:e.map(({key:n,ids:i})=>{if(!Array.isArray(i))return null;for(let s of i){if(typeof s!="string"||!s)continue;let o=t.getElementById(s);if(o)return{key:n,element:o}}return null}).filter(n=>!!(n&&n.element))}function j(e,t){if(!e||typeof e!="object")return"";let n=Jt[t]||[t];for(let i of n)if(Object.prototype.hasOwnProperty.call(e,i)){let s=e[i];return s==null?"":typeof s=="string"?s:String(s)}return""}function Xt(e,t){if(!e)return;let n=t??"";if(e instanceof HTMLInputElement){e.type==="checkbox"?e.checked=!!n:e.value=typeof n=="string"?n:String(n);return}(e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&(e.value=typeof n=="string"?n:String(n))}function Zt(e){return e?e instanceof HTMLInputElement?e.type==="checkbox"?e.checked:e.value:e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement?e.value:"":""}function st(e,t){Array.isArray(t)&&t.forEach(({key:n,element:i})=>{let s=e&&typeof e=="object"?j(e,n):"";Xt(i,s)})}function ot(e,t,n,i){Array.isArray(e)&&e.forEach(({element:s})=>{s instanceof HTMLInputElement?["checkbox","radio"].includes(s.type)?s.checked=!1:s.value="":(s instanceof HTMLTextAreaElement||s instanceof HTMLSelectElement)&&(s.value="")}),t&&(t.value=""),n&&(n.textContent=i)}function rt(e){let t={};return Array.isArray(e)&&e.forEach(({key:n,element:i})=>{let s=Zt(i);if(typeof s=="boolean"){t[n]=s;return}let o=typeof s=="string"?s.trim():s;t[n]=o??""}),t}function D(e){return e==null?"":String(e).replace(/[&<>'"]/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}})}var nt,Jt,Ae,De,at=Ze(()=>{nt=[{key:"title",ids:["cue-title","title"]},{key:"details",ids:["cue-details","details","cue-description"]},{key:"date",ids:["cue-date","date"]},{key:"time",ids:["cue-time","time"]},{key:"priority",ids:["cue-priority","priority"]},{key:"category",ids:["cue-category","category"]}],Jt={title:["title","name"],details:["details","description","notes","body"],date:["date","dueDate","due_date"],time:["time","dueTime","due_time"],priority:["priority","level"],category:["category","tag"]},Ae="Create Cue",De="Edit Cue"});function lt(e){return new Ie(e)}var en,tn,Ie,ct=Ze(()=>{en=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),tn={prepare:"cue:prepare",openRequest:"cue:open",closeRequest:"cue:close",cancelled:"cue:cancelled",shown:"cue:shown",hidden:"cue:hidden"},Ie=class e{static activeStack=[];constructor(t={}){this.modal=t.modalElement??null,this.openButton=t.openButton??null,this.closeButton=t.closeButton??null,this.backdropButton=t.backdropButton??null,this.titleInput=t.titleInput??null,this.modalTitle=t.modalTitle??null,this.defaultTitle=t.defaultTitle??"",this.editTitle=t.editTitle??t.defaultTitle??"",this.isOpen=!1,this.isDestroyed=!1,this.manageAria=t.manageAria!==!1,this.enableFocusTrap=t.focusTrap!==!1,this.shouldAutoFocus=t.autoFocus!==!1,this.eventTarget=t.eventTarget??document,this.events={...tn,...t.events||{}},this.animationHooks=t.animationHooks??{},this.enableStacking=t.enableStacking!==!1,this.isDisabled=!1,this.previouslyFocusedElement=null,this.boundHandlers={handleOpenClick:this.handleOpenClick.bind(this),handleCloseClick:this.handleCloseClick.bind(this),handleBackdropClick:this.handleBackdropClick.bind(this),handleCancel:this.handleCancel.bind(this),handleKeydown:this.handleKeydown.bind(this),handleDocumentOpenRequest:this.handleDocumentOpenRequest.bind(this),handleDocumentCloseRequest:this.handleDocumentCloseRequest.bind(this)},this.init()}init(){if(!this.validateModal()){this.isDisabled=!0;return}this.manageAria&&this.applyAriaAttributes(),this.setupEventListeners()}validateModal(){return!this.modal||!(this.modal instanceof HTMLElement)?(console.warn("[ModalController] Modal element is not provided or invalid."),!1):(typeof this.modal.showModal!="function"&&(this.modal.showModal=this.modal.showModal||(()=>{this.modal?.setAttribute("open","")})),typeof this.modal.close!="function"&&(this.modal.close=this.modal.close||(()=>{this.modal?.removeAttribute("open")})),this.modal.hasAttribute("tabindex")||(this.modal.tabIndex=-1),!0)}applyAriaAttributes(){this.modal&&(this.modal.setAttribute("role",this.modal.getAttribute("role")||"dialog"),this.modal.setAttribute("aria-modal","true"),this.modalTitle&&this.modalTitle.id&&this.modal.setAttribute("aria-labelledby",this.modalTitle.id),this.titleInput&&this.titleInput.id&&this.modal.setAttribute("aria-describedby",this.titleInput.id),this.modal.setAttribute("aria-hidden","true"))}async show(t={}){if(!(!this.modal||this.isDestroyed||this.isDisabled)){if(this.isOpen){this.shouldAutoFocus&&this.focusTitleInput();return}await this.runHook("onBeforeShow"),this.previouslyFocusedElement=document.activeElement instanceof HTMLElement?document.activeElement:null,this.enableStacking&&this.addToStack(),typeof this.modal.showModal=="function"&&!this.modal.open?this.modal.showModal():this.modal.setAttribute("open",""),this.modal.setAttribute("aria-hidden","false"),this.isOpen=!0,this.shouldAutoFocus&&this.focusTitleInput(),this.dispatchEvent("shown",{controller:this,...t}),await this.runHook("onAfterShow")}}async hide(t={}){!this.modal||this.isDestroyed||this.isDisabled||!this.isOpen||(await this.runHook("onBeforeHide"),typeof this.modal.close=="function"&&this.modal.open?this.modal.close():this.modal.removeAttribute("open"),this.modal.setAttribute("aria-hidden","true"),this.isOpen=!1,this.removeFromStack(),await this.restoreFocus(),this.dispatchEvent("hidden",{controller:this,...t}),await this.runHook("onAfterHide"))}focusTitleInput(){let t=this.titleInput||this.modal?.querySelector("[autofocus]");!t||typeof t.focus!="function"||window.setTimeout(()=>{try{t.focus({preventScroll:!0})}catch{t.focus()}},50)}async restoreFocus(){let t=this.previouslyFocusedElement||this.openButton;if(t&&typeof t.focus=="function")try{t.focus({preventScroll:!0})}catch{t.focus()}this.previouslyFocusedElement=null}setupEventListeners(){this.modal&&(this.openButton&&this.openButton.addEventListener("click",this.boundHandlers.handleOpenClick),this.closeButton&&this.closeButton.addEventListener("click",this.boundHandlers.handleCloseClick),this.backdropButton&&this.backdropButton.addEventListener("click",this.boundHandlers.handleBackdropClick),this.modal.addEventListener("cancel",this.boundHandlers.handleCancel),this.modal.addEventListener("keydown",this.boundHandlers.handleKeydown),this.eventTarget&&(this.eventTarget.addEventListener(this.events.openRequest,this.boundHandlers.handleDocumentOpenRequest),this.eventTarget.addEventListener(this.events.closeRequest,this.boundHandlers.handleDocumentCloseRequest)))}cleanup(){this.modal&&(this.openButton&&this.openButton.removeEventListener("click",this.boundHandlers.handleOpenClick),this.closeButton&&this.closeButton.removeEventListener("click",this.boundHandlers.handleCloseClick),this.backdropButton&&this.backdropButton.removeEventListener("click",this.boundHandlers.handleBackdropClick),this.modal.removeEventListener("cancel",this.boundHandlers.handleCancel),this.modal.removeEventListener("keydown",this.boundHandlers.handleKeydown),this.eventTarget&&(this.eventTarget.removeEventListener(this.events.openRequest,this.boundHandlers.handleDocumentOpenRequest),this.eventTarget.removeEventListener(this.events.closeRequest,this.boundHandlers.handleDocumentCloseRequest)))}async destroy(t={}){this.isDestroyed||(await this.hide(t),this.cleanup(),this.isDestroyed=!0)}setEditMode(t=!1){this.modalTitle&&(this.modalTitle.textContent=t?this.editTitle:this.defaultTitle),this.modal&&this.modal.setAttribute("data-mode",t?"edit":"create"),this.currentMode=t?"edit":"create"}handleOpenClick(t){t.preventDefault(),this.dispatchEvent("prepare",{mode:"create",controller:this}),this.setEditMode(!1),this.show({reason:"open-button"})}handleCloseClick(t){t.preventDefault(),this.requestClose("user-dismissed")}handleBackdropClick(t){t.preventDefault(),this.requestClose("backdrop")}handleCancel(t){t.preventDefault(),this.requestClose("keyboard")}handleKeydown(t){this.enableFocusTrap&&t.key==="Tab"&&this.maintainFocus(t),t.key==="Escape"&&this.requestClose("keyboard")}maintainFocus(t){if(!this.modal)return;let n=this.getFocusableElements();if(n.length===0){t.preventDefault(),this.modal.focus();return}let i=n[0],s=n[n.length-1],o=document.activeElement;t.shiftKey&&o===i?(t.preventDefault(),s.focus()):!t.shiftKey&&o===s&&(t.preventDefault(),i.focus())}getFocusableElements(){return this.modal?Array.from(this.modal.querySelectorAll(en)).filter(t=>!(t instanceof HTMLElement)||t.hasAttribute("disabled")?!1:t.getAttribute("aria-hidden")!=="true"):[]}handleDocumentOpenRequest(t){if(!t||t.detail&&t.detail.controller&&t.detail.controller!==this)return;let n=t?.detail?.mode==="edit";this.setEditMode(n),this.show({reason:t?.detail?.reason||"external-open",mode:t?.detail?.mode})}handleDocumentCloseRequest(t){if(!t||t.detail?.controller&&t.detail.controller!==this||t.detail?.initiatedBy==="controller")return;let n=t.detail?.reason||"external-close";this.hide({reason:n})}dispatchEvent(t,n={}){let i=this.events[t];if(!i||!this.eventTarget||typeof this.eventTarget.dispatchEvent!="function")return;let s=new CustomEvent(i,{detail:n,bubbles:!1,cancelable:!0});this.eventTarget.dispatchEvent(s)}requestClose(t){let n={reason:t,controller:this};this.dispatchEvent("cancelled",n),this.dispatchEvent("closeRequest",{...n,initiatedBy:"controller"}),this.hide({reason:t})}async runHook(t){let n=this.animationHooks?.[t];typeof n=="function"&&await n(this)}addToStack(){let t=e.activeStack,n=t.indexOf(this);n!==-1&&t.splice(n,1),t.push(this),this.stackIndex=t.length-1,this.modal?.setAttribute("data-stack-index",String(this.stackIndex))}removeFromStack(){let t=e.activeStack,n=t.indexOf(this);n!==-1&&t.splice(n,1),this.stackIndex=void 0,this.modal&&this.modal.removeAttribute("data-stack-index")}}});var On=Wt(()=>{Yt();Qt();at();ct();zt();et();function nn(){if(typeof document>"u")return;let e=document.getElementById("add-reminder-modal")??document.getElementById("reminder-modal"),t=document.getElementById("add-reminder-form")??document.getElementById("reminder-form"),n=document.getElementById("reminder-title");if(!e||!t||!n)return;let i=document.querySelectorAll("[data-open-reminder-modal]");if(!i.length)return;let s=e.querySelector("[data-reminder-modal-backdrop]"),o=e.querySelectorAll("[data-close-modal]"),l=document.getElementById("mainContent"),d=document.querySelector('nav[aria-label="Primary"]'),f=[l,d],u=e.querySelector('[role="dialog"]')??e,T=["a[href]","area[href]","button:not([disabled])",'input:not([type="hidden"]):not([disabled])',"select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'],h=null,w=()=>{if(!(u instanceof HTMLElement))return[];let r=u.querySelectorAll(T.join(","));return Array.from(r).filter(a=>{let p=a instanceof HTMLElement,m=typeof SVGElement<"u"&&a instanceof SVGElement;if(!p&&!m||a.getAttribute("aria-hidden")==="true"||"disabled"in a&&a.disabled||a.hidden||a.closest("[hidden]"))return!1;let y=a.getBoundingClientRect();return y.width>0&&y.height>0})},ee=()=>{let r=w(),a=r.find(p=>p.hasAttribute("data-autofocus")||p.hasAttribute("autofocus"))||(n&&r.includes(n)?n:null)||r[0];if(a&&typeof a.focus=="function"){a.focus({preventScroll:!0});return}u instanceof HTMLElement&&typeof u.focus=="function"&&u.focus({preventScroll:!0})},te=r=>{u instanceof HTMLElement&&(!(r.target instanceof Node)||!u.contains(r.target))&&(r.stopPropagation(),ee())},ne=r=>{if(r.key!=="Tab")return;let a=w();if(!a.length){r.preventDefault(),u instanceof HTMLElement&&u.focus({preventScroll:!0});return}let p=a[0],m=a[a.length-1],y=document.activeElement;if(r.shiftKey){(!u.contains(y)||y===p)&&(r.preventDefault(),m.focus());return}(!u.contains(y)||y===m)&&(r.preventDefault(),p.focus())},U=r=>{f.forEach(a=>{a&&(r?a.setAttribute("inert",""):a.removeAttribute("inert"))})},N=()=>{e.classList.add("hidden"),e.setAttribute("aria-hidden","true"),e.setAttribute("inert",""),U(!1),document.removeEventListener("keydown",H,!0),e.removeEventListener("keydown",ne,!0),e.removeEventListener("focusin",te,!0),h&&typeof h.focus=="function"&&h.focus(),h=null},H=r=>{r.key==="Escape"&&(r.preventDefault(),N())},ie=({triggerElement:r}={})=>{r&&typeof r.focus=="function"?h=r:h=document.activeElement,e.classList.remove("hidden"),e.removeAttribute("aria-hidden"),e.removeAttribute("inert"),U(!0),document.addEventListener("keydown",H,!0),e.addEventListener("keydown",ne,!0),e.addEventListener("focusin",te,!0),window.requestAnimationFrame(()=>{ee()})};i.forEach(r=>{r.addEventListener("click",a=>{a.preventDefault();let p=a.currentTarget instanceof HTMLElement?a.currentTarget:null;ie({triggerElement:p})})}),o.forEach(r=>{r.addEventListener("click",a=>{a.preventDefault(),N()})}),e.addEventListener("click",r=>{r.target===e&&N()}),s?.addEventListener("click",r=>{r.target===s&&N()});let se=document.getElementById("reminders-list"),R=document.getElementById("reminder-date"),C=document.getElementById("reminder-priority"),oe=document.getElementById("reminder-notes"),Vt=r=>{if(!r)return"";let a=new Date(r);return Number.isNaN(a.getTime())?"":a.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},jt=({title:r,dueDate:a,priority:p})=>{if(typeof document>"u")return null;let m=document.createElement("li");m.className="task-item reminder-card grid grid-cols-[minmax(0,1fr)_auto] items-start gap-3 rounded-xl border border-base-300 bg-base-100/80 p-3 pl-[calc(0.75rem+3px)] text-sm shadow-sm transition hover:border-base-200 hover:bg-base-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/60",m.dataset.compact="true",m.setAttribute("role","button"),m.tabIndex=0,m.setAttribute("aria-label",`Edit reminder: ${r}`);let y=document.createElement("div");y.className="flex min-w-0 flex-col gap-2";let Y=document.createElement("p");Y.className="text-sm font-semibold leading-snug text-base-content",Y.textContent=r,y.appendChild(Y);let ze=(S,Ce="neutral")=>{let re=document.createElement("span");re.className="inline-flex max-w-full items-center gap-1 rounded-full border border-base-300/80 bg-base-200/80 px-2 py-[2px] text-[0.65rem] font-medium text-base-content/70",re.title=S;let V=document.createElement("span");V.className="h-1.5 w-1.5 rounded-full",Ce==="priority-high"?V.classList.add("bg-error"):Ce==="priority-medium"?V.classList.add("bg-warning"):Ce==="priority-low"?V.classList.add("bg-secondary"):V.classList.add("bg-base-content/40");let xe=document.createElement("span");return xe.className="truncate",xe.textContent=S,re.append(V,xe),re},z=document.createElement("div");z.className="flex flex-wrap items-center gap-1 text-xs text-base-content/70";let Qe=Vt(a);Qe&&z.appendChild(ze(`Due ${Qe}`));let Se=p?p.trim().toLowerCase():"",Kt=Se==="high"?"priority-high":Se==="low"?"priority-low":Se==="medium"?"priority-medium":"neutral",Gt=p||"Medium";z.appendChild(ze(Gt,Kt)),z.children.length&&y.appendChild(z),m.appendChild(y);let ke=document.createElement("div");ke.className="flex items-start gap-1";let E=document.createElement("button");E.type="button",E.className="btn btn-ghost btn-circle btn-xs text-success",E.innerHTML='<span aria-hidden="true">\u2713</span>';let $=document.createElement("button");$.type="button",$.className="btn btn-ghost btn-circle btn-xs text-error",$.setAttribute("aria-label",`Delete reminder: ${r}`),$.innerHTML='<span aria-hidden="true">\u{1F5D1}\uFE0F</span>';let Le=!1,Je=()=>{Le?(Y.classList.add("line-through","text-base-content/60"),E.classList.remove("text-success"),E.classList.add("text-base-content/60"),E.innerHTML='<span aria-hidden="true">\u21BA</span>',E.setAttribute("aria-label",`Mark reminder as active: ${r}`)):(Y.classList.remove("line-through","text-base-content/60"),E.classList.add("text-success"),E.classList.remove("text-base-content/60"),E.innerHTML='<span aria-hidden="true">\u2713</span>',E.setAttribute("aria-label",`Mark reminder as done: ${r}`))};Je(),E.addEventListener("click",S=>{S.preventDefault(),S.stopPropagation(),Le=!Le,Je()}),$.addEventListener("click",S=>{S.preventDefault(),S.stopPropagation(),m.remove()}),ke.append(E,$),m.appendChild(ke);let Xe=()=>{n&&(n.value=r),R&&(R.value=a||""),C&&(C.value=p||"Medium"),ie({triggerElement:m})};return m.addEventListener("click",Xe),m.addEventListener("keydown",S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),Xe())}),m};t.addEventListener("submit",r=>{r.preventDefault();let a=n.value.trim();if(!a){n.focus();return}let p=oe?.value??"",m={title:a,dueDate:R?.value||"",priority:C?.value||"",notes:p.trim()},y=se?jt(m):null;y&&se&&se.prepend(y),t.reset(),N()})}nn();var dt=null;function sn(){if(typeof window>"u")return"";let e=window.location.hash||"#dashboard";return(e.startsWith("#")?e.slice(1):e)||"dashboard"}function on(e){typeof document>"u"||!e||(window.clearTimeout(dt),dt=window.setTimeout(()=>{let t=document.querySelector(`[data-route="${e}"]`);if(!t)return;let n=t.querySelector("h1, [data-primary-heading]");if(n instanceof HTMLElement&&(n.hasAttribute("tabindex")||n.setAttribute("tabindex","-1"),typeof n.focus=="function"))try{n.focus({preventScroll:!0})}catch{n.focus()}},0))}function Be(e){let t=e||sn();t&&on(t)}function rn(){if(typeof document>"u"||typeof window>"u")return;let e=()=>{Be()};window.addEventListener("hashchange",e),window.addEventListener("DOMContentLoaded",e),document.querySelectorAll("[data-nav]").forEach(n=>{n.addEventListener("click",i=>{if(!(i.currentTarget instanceof HTMLAnchorElement))return;let s=i.currentTarget.getAttribute("href")||"";if(!s.startsWith("#"))return;i.preventDefault();let o=s||"#dashboard",l=o.replace("#","")||"dashboard";window.location.hash!==o&&(window.location.hash=o),typeof window.renderRoute=="function"&&window.renderRoute(),Be(l)})}),typeof window.renderRoute=="function"&&window.renderRoute(),Be()}rn();var ut=document.getElementById("settings-save-button"),le=document.getElementById("settings-save-confirmation"),mt=document.getElementById("live-status"),Fe=null;ut&&le&&ut.addEventListener("click",e=>{e.preventDefault(),le.classList.remove("hidden"),le.textContent="Settings saved!",mt&&(mt.textContent="Settings saved!"),Fe&&window.clearTimeout(Fe),Fe=window.setTimeout(()=>{le.classList.add("hidden")},3e3)});var Lt=document.getElementById("title"),an=document.getElementById("reminderText"),A=(()=>{let e=document.getElementById("cue-modal")??document.getElementById("cue_modal");return lt({modalElement:e,openButton:document.getElementById("openCueModal"),closeButton:document.getElementById("closeCueModal"),backdropButton:e?.querySelector(".modal-backdrop button")??null,titleInput:Lt,modalTitle:document.getElementById("modal-title"),defaultTitle:Ae,editTitle:De})})();A?.setEditMode(!1);var ln=()=>{let e=!!Lt;if(!!an)return ae({variant:"mobile",titleSel:"#reminderText",dateSel:"#reminderDate",timeSel:"#reminderTime",detailsSel:"#reminderDetails",prioritySel:"#priority",categorySel:"#category",saveBtnSel:"#saveReminder",cancelEditBtnSel:"#cancelEditBtn",listSel:"#reminderList",listWrapperSel:"#remindersWrapper",emptyStateSel:"#emptyState",statusSel:"#statusMessage",syncStatusSel:"#syncStatus",voiceBtnSel:"#voiceBtn",notifBtnSel:"#notifBtn",categoryOptionsSel:"#categorySuggestions",countTotalSel:"#totalCount",googleSignInBtnSel:"#googleSignInBtn",googleSignOutBtnSel:"#googleSignOutBtn",googleAvatarSel:"#googleAvatar",googleUserNameSel:"#googleUserName",syncAllBtnSel:"#syncAll",syncUrlInputSel:"#syncUrl",saveSettingsSel:"#saveSyncSettings",testSyncSel:"#testSync",openSettingsSel:'[data-open="settings"]',dateFeedbackSel:"#dateFeedback"});let n={titleSel:"#title",dateSel:"#date",timeSel:"#time",detailsSel:"#details",prioritySel:"#priority",categorySel:"#category",saveBtnSel:"#saveBtn",cancelEditBtnSel:"#cancelEditBtn",listSel:"#reminderList",statusSel:"#auth-feedback",syncStatusSel:"#syncStatus",voiceBtnSel:"#voiceBtn",categoryOptionsSel:"#categorySuggestions",countTotalSel:"#inlineTotalCount",emptyStateSel:"#emptyState",listWrapperSel:"#remindersWrapper",dateFeedbackSel:"#dateFeedback",googleSignInBtnSel:"#googleSignInBtn",googleSignOutBtnSel:"#googleSignOutBtn",googleUserNameSel:"#googleUserName",variant:"desktop",autoWireAuthButtons:!0};return e?ae(n):ae({...n,listSel:null,listWrapperSel:null,emptyStateSel:null,countTotalSel:null,voiceBtnSel:null,categoryOptionsSel:null,dateSel:null,timeSel:null,prioritySel:null,categorySel:null,saveBtnSel:null,cancelEditBtnSel:null,detailsSel:null,titleSel:null,dateFeedbackSel:null})};ln().catch(e=>{console.error("Failed to initialise reminders",e)});tt({selectors:{signInButtons:["#googleSignInBtn"],signOutButtons:["#googleSignOutBtn"],userBadge:"#user-badge",userBadgeEmail:"#user-badge-email",userBadgeInitial:"#user-badge-initial",userName:"#googleUserName",syncStatus:["#sync-status"],feedback:"#auth-feedback"},disableButtonBinding:!0});var F=document.getElementById("cues-list"),Me=document.getElementById("pinnedNotesCard"),K=document.getElementById("pinnedNotesList"),P=document.getElementById("cue-form"),x=P?.querySelector("#cue-id-input"),cn=A?.defaultTitle||A?.modalTitle?.textContent?.trim()||Ae,Kn=A?.editTitle||De,ge=document.getElementById("tab-cues"),be=document.getElementById("tab-daily"),Q=document.getElementById("cues-view"),J=document.getElementById("daily-list-view"),ft=document.getElementById("daily-list-header"),Ct=document.getElementById("quick-add-form"),v=document.getElementById("quick-add-input"),k=document.getElementById("daily-voice-btn"),O=document.getElementById("daily-tasks-container"),Re=document.getElementById("clear-completed-btn"),Ee=document.getElementById("daily-list-permission-notice"),ht=document.getElementById("remindersCount"),pt=document.getElementById("plannerCount"),Gn=document.getElementById("resourcesCount"),Wn=document.getElementById("templatesCount"),ce=document.getElementById("dailySnapshotList"),de=document.getElementById("todaysFocusList"),I=document.getElementById("weekAtAGlanceList"),B=null;I&&(B=document.createElement("li"),B.dataset.emptyState="week",B.className="list-none rounded-xl border border-dashed border-base-300/70 bg-base-100/60 p-4 text-sm italic text-base-content/60",B.textContent="No upcoming events this week.");var yt=()=>{if(!I||!B)return;I.querySelectorAll(":scope > li:not([data-empty-state]):not(.hidden):not([hidden])").length===0?I.contains(B)||I.appendChild(B):I.contains(B)&&I.removeChild(B)};I&&(yt(),new MutationObserver(yt).observe(I,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","hidden"]}));var Ne=e=>{Me&&(e?Me.classList.remove("hidden"):Me.classList.add("hidden"))},X={high:{badgeClass:"badge badge-outline text-error",badgeLabel:"High priority",rank:0},medium:{badgeClass:"badge badge-outline text-warning",badgeLabel:"Due soon",rank:1},low:{badgeClass:"badge badge-outline text-secondary",badgeLabel:"Scheduled",rank:2}},gt=(()=>{try{return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"})}catch{return null}})(),bt=(()=>{try{return new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"})}catch{return null}})(),he=e=>e?(typeof e.title=="string"?e.title.trim():"")||"Untitled reminder":"",Ue=e=>{if(!e?.due)return null;try{let t=new Date(e.due);return Number.isNaN(t.getTime())?null:t}catch{return null}},dn=(e,t)=>!e||!t?!1:e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),xt=e=>{if(!e)return"";if(gt)try{return gt.format(e)}catch{}let t=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return`${t}:${n}`},un=e=>{if(!e)return"";if(bt)try{return bt.format(e)}catch{}return e.toLocaleDateString()},At=e=>{let t=typeof e?.priority=="string"?e.priority.trim().toLowerCase():"";return Object.prototype.hasOwnProperty.call(X,t)?t:"medium"},Et=e=>{let t=At(e);return X[t]?.rank??X.medium.rank},mn=e=>{let t=At(e);return X[t]??X.medium},vt=e=>{let t=Ue(e);return t?t.getTime():Number.POSITIVE_INFINITY};function Dt(e=[]){if(!ce)return;let t=new Date,n=(Array.isArray(e)?e:[]).map(i=>({reminder:i,date:Ue(i)})).filter(({date:i})=>i&&dn(i,t)).sort((i,s)=>i.date.getTime()-s.date.getTime());if(!n.length){ce.innerHTML='<p class="text-sm italic text-base-content/60">No reminders due today.</p>';return}ce.innerHTML="",n.forEach(({reminder:i,date:s})=>{let o=document.createElement("li");o.className="rounded-xl border border-base-200 bg-base-100/80 p-3 shadow-sm";let l=document.createElement("p");l.className="font-semibold text-base-content",l.textContent=he(i),o.appendChild(l);let d=xt(s),f=document.createElement("p");f.className="text-xs text-base-content/70",f.textContent=d?`Due ${d}`:"Due today",o.appendChild(f),ce.appendChild(o)})}function It(e=[]){if(!de)return;let t=(Array.isArray(e)?e:[]).filter(n=>n&&!n.done).sort((n,i)=>{let s=Et(n)-Et(i);if(s!==0)return s;let o=vt(n)-vt(i);return o!==0?o:he(n).localeCompare(he(i),void 0,{sensitivity:"base"})}).slice(0,3);if(!t.length){de.innerHTML='<li class="list-none text-sm italic text-base-content/60">No focus items.</li>';return}de.innerHTML="",t.forEach(n=>{let i=document.createElement("li");i.className="rounded-xl border border-base-200 bg-base-100/80 p-4 shadow-sm";let s=document.createElement("div");s.className="flex items-center justify-between gap-3";let o=document.createElement("p");o.className="font-semibold text-base-content",o.textContent=he(n),s.appendChild(o);let l=mn(n),d=document.createElement("span");d.className=l.badgeClass,d.textContent=l.badgeLabel,s.appendChild(d),i.appendChild(s);let f=Ue(n),u=document.createElement("p");if(u.className="text-xs text-base-content/70",f){let T=xt(f),h=un(f),w=[];T&&w.push(`Due ${T}`),h&&w.push(h),u.textContent=w.length?w.join(" \u2022 "):"Due soon"}else u.textContent="No due date";i.appendChild(u),de.appendChild(i)})}var fn=e=>{if(!ht)return;let t=Array.isArray(e)?e.length:0;ht.textContent=String(t)},hn=e=>{let t=Array.isArray(e?.detail?.items)?e.detail.items:[];fn(t),Dt(t),It(t)};document.addEventListener("memoryCue:remindersUpdated",hn);Dt();It();var Oe=it(nt),pn={apiKey:"AIzaSyAmAMiz0zG3dAhZJhOy1DYj8fKVDObL36c",authDomain:"memory-cue-app.firebaseapp.com",projectId:"memory-cue-app",storageBucket:"memory-cue-app.firebasestorage.app",messagingSenderId:"751284466633",appId:"1:751284466633:web:3b10742970bef1a5d5ee18",measurementId:"G-R0V4M7VCE6"},ue=null,yn=3,Tt=120;function gn(e){if(e==null)return"";let t=String(e).replace(/\s+/g," ").trim();return t?t.length<=Tt?t:`${t.slice(0,Tt-1)}\u2026`:""}function bn(e){return!e||typeof e!="object"?!1:[e.pinned,e.isPinned,e.pin].some(n=>{if(typeof n=="boolean")return n;if(typeof n=="string"){let i=n.trim().toLowerCase();return i==="true"||i==="1"||i==="yes"}return!1})}function wt(e){if(!K)return;let t=Array.isArray(e)?e:[];if(!t.length){K.innerHTML='<li class="list-none text-sm italic text-base-content/60">No pinned notes yet.</li>',Ne(!1);return}let n=t.filter(o=>bn(o));if(!n.length){K.innerHTML='<li class="list-none text-sm italic text-base-content/60">No pinned notes yet.</li>',Ne(!1);return}Ne(!0);let s=n.slice(0,yn).map(o=>{let l=D(j(o,"title")||"Untitled Cue"),d=j(o,"details"),f=D(gn(d)),u=f?`<p class="mt-1 text-sm text-base-content/70">${f}</p>`:"";return`
        <li class="rounded-xl border border-base-300 bg-base-100/80 p-3">
          <p class="font-medium text-base-content">${l}</p>
          ${u}
        </li>
      `}).join("");K.innerHTML=s}function qe(e,{tone:t="muted"}={}){if(!F)return;let n=["text-sm"];n.push(t==="error"?"text-error":"text-base-content/60"),F.innerHTML=`<p class="${n.join(" ")}">${D(e)}</p>`}function En(e){if(!F)return;if(!Array.isArray(e)||e.length===0){qe("No cues yet.");return}let t=e.map(n=>{let i=D(j(n,"title")||"Untitled Cue"),s=D(j(n,"details"));return`
        <div class="card w-96 bg-base-100 shadow-xl">
          <div class="card-body">
            <h2 class="card-title">${i}</h2>
            ${s?`<p>${s}</p>`:""}
            <div class="card-actions justify-end">
              <div class="dropdown dropdown-left">
                <label tabindex="0" class="btn btn-ghost btn-xs m-1">...</label>
                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                  <li><a class="edit-btn" data-id="${D(n.id)}">Edit</a></li>
                  <li><a class="delete-btn" data-id="${D(n.id)}">Delete</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      `}).join("");F.innerHTML=t}async function Te(){return ue||(ue=(async()=>{let[{initializeApp:e,getApps:t},{getFirestore:n,enableMultiTabIndexedDbPersistence:i,enableIndexedDbPersistence:s,collection:o,doc:l,getDoc:d,addDoc:f,updateDoc:u,getDocs:T,query:h,orderBy:w,serverTimestamp:ee,setDoc:te,arrayUnion:ne}]=await Promise.all([import("https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js"),import("https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js")]),U=t(),N=U&&U.length?U[0]:e(pn),H=n(N);(function(){let R=typeof window<"u"?window:typeof globalThis<"u"?globalThis:null;R&&(R.__persistenceInitialized__||(R.__persistenceInitialized__=!0,(async()=>{try{await i(H),console.info("[Firestore] Persistence: multi-tab enabled")}catch(C){if(C&&C.code==="failed-precondition")try{await s(H),console.info("[Firestore] Persistence: single-tab fallback enabled")}catch(oe){console.warn("[Firestore] Persistence disabled (single-tab fallback failed):",oe?.code||oe)}else C&&C.code==="unimplemented"?console.warn("[Firestore] Persistence not supported in this browser (online-only)."):console.warn("[Firestore] Persistence initialization error:",C?.code||C)}})()))})();let ie=o(H,"cues");return{db:H,cuesCollection:ie,getCollection:o,doc:l,getDoc:d,addDoc:f,updateDoc:u,getDocs:T,query:h,orderBy:w,serverTimestamp:ee,setDoc:te,arrayUnion:ne}})().catch(e=>{throw console.error("Failed to initialise Firestore for cues",e),e}),ue)}async function vn(){let e=await Te(),{getDocs:t,cuesCollection:n,query:i,orderBy:s}=e,o=i&&s?i(n,s("createdAt","desc")):n;return(await t(o)).docs.map(d=>({id:d.id,...d.data()}))}async function Tn(e){if(!e)return null;let t=await Te(),{db:n,doc:i,getDoc:s}=t,o=i(n,"cues",e),l=await s(o);return l.exists()?{id:l.id,...l.data()}:null}async function Bt(){if(!(!F&&!K))try{let e=await vn();En(e),wt(e)}catch(e){console.error("Failed to load cues",e),we(e)?qe("Sign in to view your cues.",{tone:"muted"}):qe("Unable to load cues right now.",{tone:"error"}),wt([])}}function wn(e){!P||!x||(st(e,Oe),x.value=e?.id||"",A?.setEditMode(!0),A?.show({mode:"edit"}))}async function Sn(e){let t=e.target instanceof Element?e.target.closest(".edit-btn"):null;if(!t)return;e.preventDefault();let n=t.getAttribute("data-id");if(n)try{let i=await Tn(n);if(!i)return;wn(i)}catch(i){console.error("Failed to prepare cue for editing",i)}}async function kn(e){if(e.preventDefault(),!P||!x)return;let t=x.value.trim(),n=rt(Oe);try{let i=await Te(),{db:s,doc:o,addDoc:l,updateDoc:d,cuesCollection:f,serverTimestamp:u}=i,T=typeof u=="function"?u():null;if(t){let h=o(s,"cues",t),w={...n};T&&(w.updatedAt=T),await d(h,w)}else{let h={...n};T&&(h.createdAt=T,h.updatedAt=T),await l(f,h)}await Bt(),ot(Oe,x,A?.modalTitle??null,cn),await A?.hide({reason:"form-submit"})}catch(i){console.error("Failed to save cue",i)}}async function Ln(){!P||!x||!F||(F.addEventListener("click",Sn),P.addEventListener("submit",kn))}P&&x&&(document.addEventListener("cue:prepare",()=>{x.value="",A?.setEditMode(!1)}),document.addEventListener("cue:close",()=>{x.value="",A?.setEditMode(!1)}));P&&x&&F&&Ln().catch(e=>{console.error("Failed to initialise cue editing",e)});(F||K)&&Bt();var c=[],me=null,q=!1,b=e=>{if(!pt)return;let t=Array.isArray(e)?e:[];pt.textContent=String(t.length)},Ft=e=>{if(!e||typeof e.then!="function"){b(c);return}e.then(t=>{if(Array.isArray(t)){b(t);return}b(c)}).catch(()=>{b(c)})},Mt="dailyTasksByDate",fe=null;function $e(){let e=new Date,t=String(e.getFullYear()),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function Cn(e){if(typeof e!="string")return"";let[t,n,i]=e.split("-"),s=Number.parseInt(t,10),o=Number.parseInt(n,10),l=Number.parseInt(i,10);if(!Number.isFinite(s)||!Number.isFinite(o)||!Number.isFinite(l))return e;let d=new Date(s,o-1,l);return Number.isNaN(d.getTime())?e:new Intl.DateTimeFormat(void 0,{month:"long",day:"numeric",year:"numeric"}).format(d)}function Z(e){if(!Re)return;let t=Array.isArray(e)&&e.some(n=>!!n?.completed);Re.disabled=!t}function _(e){if(!O)return;if(!Array.isArray(e)||e.length===0){O.innerHTML='<p class="text-sm text-base-content/60">No tasks for today yet.</p>',Z([]);return}let t=e.map((n,i)=>{let s=D(n?.text||""),o=!!n?.completed,l=["ml-3","flex-1","text-sm","sm:text-base","text-base-content"];return o&&l.push("line-through","text-opacity-50"),`
        <div class="flex items-center p-3 border-b border-base-200" data-task-index="${i}">
          <input type="checkbox" class="checkbox checkbox-sm" data-task-index="${i}" data-task-text="${s}" ${o?"checked":""} />
          <span class="${l.join(" ")}">${s}</span>
        </div>
      `}).join("");O.innerHTML=t,Z(e)}function ve(){Ee&&Ee.classList.remove("hidden")}function xn(){Ee&&Ee.classList.add("hidden")}function Ve(e){return{text:typeof e?.text=="string"?e.text:"",completed:!!e?.completed}}function W(e){return Array.isArray(e)?e.map(t=>Ve(t)):[]}function je(){if(typeof localStorage>"u")return{};try{let e=localStorage.getItem(Mt);if(!e)return{};let t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch(e){return console.warn("Unable to read daily tasks from storage",e),{}}}function Nt(e){if(!(typeof localStorage>"u"))try{let t=e&&typeof e=="object"?e:{};localStorage.setItem(Mt,JSON.stringify(t))}catch(t){console.warn("Unable to persist daily tasks locally",t)}}function St(e){let t=je(),n=t&&typeof t=="object"?t[e]:[];return W(n)}function pe(e,t){let n=je(),i=W(t);return n[e]=i,Nt(n),i}function He(e,t){let n=je(),i=W(n[e]);return i.push(Ve(t)),n[e]=i,Nt(n),i}function we(e){let t=typeof e?.code=="string"?e.code.toLowerCase():"";if(t)return t.includes("permission-denied")||t.includes("insufficient-permission");let n=typeof e?.message=="string"?e.message.toLowerCase():"";return!!(n&&n.includes("permission"))}async function Ke(){return fe||(fe=Te().then(e=>{let{db:t,getCollection:n}=e,i=typeof n=="function"&&t?n(t,"dailyLists"):null;return{...e,dailyListsCollection:i}}).catch(e=>{throw console.error("Failed to initialise Firestore for daily lists",e),e}),fe)}function Ge(e,t){let{doc:n,dailyListsCollection:i,db:s}=e||{};if(typeof n!="function")throw new Error("Firestore document helper is unavailable");return i?n(i,t):n(s,"dailyLists",t)}async function We(){if(!ft||!O)return;let e=$e(),t=Cn(e);if(ft.textContent=t?`Today's List - ${t}`:"Today's List",q){ve();let n=St(e);return c=n,_(n),b(n),Promise.resolve(n)}return me||(O.innerHTML='<p class="text-sm text-base-content/60">Loading tasks\u2026</p>',Z([]),me=(async()=>{try{let n=await Ke(),i=Ge(n,e),s=await n.getDoc(i),o=s.exists()?s.data()?.tasks:[];return c=W(o),_(c),pe(e,c),q=!1,xn(),b(c),c}catch(n){if(we(n)){console.warn("Falling back to local daily tasks due to permission issue",n),q=!0,ve();let i=St(e);return c=i,_(i),b(i),i}return console.error("Failed to load daily list",n),O.innerHTML='<p class="text-sm text-error">Unable to load daily tasks right now.</p>',c=[],Z(c),b(c),c}})().finally(()=>{me=null})),me}async function An(e){let t=$e(),n=Ve(e);if(q){He(t,n);return}try{let i=await Ke(),s=Ge(i,t),o=await i.getDoc(s);if(o.exists()&&typeof i.arrayUnion=="function")await i.updateDoc(s,{tasks:i.arrayUnion(n)});else{let l=o.exists()?o.data()?.tasks:[],d=Array.isArray(l)?W(l):[];d.push(n),typeof i.setDoc=="function"?await i.setDoc(s,{tasks:d},{merge:!0}):await i.updateDoc(s,{tasks:d})}He(t,n)}catch(i){if(we(i)){console.warn("Saving task locally because cloud sync is unavailable",i),q=!0,ve(),He(t,n);return}throw i}}async function Ht(e){let t=$e(),n=W(e);if(q){pe(t,n);return}try{let i=await Ke(),s=Ge(i,t);typeof i.setDoc=="function"?await i.setDoc(s,{tasks:n},{merge:!0}):await i.updateDoc(s,{tasks:n}),pe(t,n)}catch(i){if(we(i)){console.warn("Persisting daily tasks locally because cloud sync is unavailable",i),q=!0,ve(),pe(t,n);return}throw i}}function Rt(e){[ge,be].forEach(t=>{if(!t)return;let n=t===e;t.classList.toggle("tab-active",n),t.setAttribute("aria-selected",n?"true":"false")})}function Dn(){!Q||!J||(Q.classList.remove("hidden"),J.classList.add("hidden"),Rt(ge))}function In(){!Q||!J||(Q.classList.add("hidden"),J.classList.remove("hidden"),Rt(be),Ft(We()))}ge&&be&&Q&&J&&(ge.addEventListener("click",e=>{e.preventDefault(),Dn()}),be.addEventListener("click",e=>{e.preventDefault(),In()}));var g=null,L=!1,ye=null;function G(e){if(!k)return;k.setAttribute("aria-pressed",e?"true":"false");let t=k.querySelector('[aria-hidden="true"]');t?t.textContent=e?"\u{1F442}":"\u{1F399}\uFE0F":k.textContent=e?"\u{1F442}":"\u{1F399}\uFE0F"}function Bn(){L&&(window.clearTimeout(ye),ye=window.setTimeout(()=>{ye=null,L&&Ot(!0)},400))}function Ot(e=!1){if(!g)return!1;if(L&&!e)return!0;try{return g.start(),L=!0,G(!0),!0}catch{return L=!1,G(!1),!1}}function Ye(){if(g){L=!1,window.clearTimeout(ye);try{g.stop()}catch{}G(!1)}}function Fn(){if(k)try{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){k.setAttribute("disabled","true"),k.setAttribute("aria-disabled","true"),k.title="Voice input is not supported in this browser.";return}g=new e;let t=document.documentElement?.lang||navigator?.language||"en-AU";if(g.lang=t,g.interimResults=!1,"continuous"in g)try{g.continuous=!0}catch{}g.onresult=n=>{let i=n?.results?.[0]?.[0]?.transcript||"";if(i&&v){v.value=i.trim();try{v.focus({preventScroll:!0})}catch{v.focus()}try{let s=v.value.length;v.setSelectionRange(s,s)}catch{}}},g.onend=()=>{if(!L){G(!1);return}Bn()},g.onerror=()=>{L=!1,G(!1)}}catch{g=null,G(!1),k.setAttribute("disabled","true"),k.setAttribute("aria-disabled","true")}}Fn();k?.addEventListener("click",()=>{g&&(L?Ye():Ot())});Ct?.addEventListener("submit",()=>{L&&Ye()});window.addEventListener("pagehide",()=>{L&&Ye()});Ct?.addEventListener("submit",async e=>{if(e.preventDefault(),!v)return;let t=v.value.trim();if(!t){v.focus();return}let n={text:t,completed:!1};v.value="",v.focus();try{await An(n);let i=await We();b(i??c)}catch(i){console.error("Failed to add task to the daily list",i),v.value=t,v.focus()}});O?.addEventListener("change",async e=>{let t=e.target instanceof HTMLInputElement?e.target:null;if(!t||t.type!=="checkbox")return;let n=Number.parseInt(t.getAttribute("data-task-index")||"",10);if(!Array.isArray(c)||Number.isNaN(n)||!c[n])return;let i=c.map(o=>({...o})),s=i.map((o,l)=>l===n?{...o,completed:t.checked}:o);c=s,_(s),b(s);try{await Ht(s)}catch(o){console.error("Failed to update task completion state",o),c=i,_(i),b(i)}});Re?.addEventListener("click",async()=>{if(!Array.isArray(c)||c.length===0)return;let e=c.filter(n=>!n.completed);if(e.length===c.length)return;let t=c.map(n=>({...n}));c=e,_(e),b(e);try{await Ht(e)}catch(n){console.error("Failed to clear completed tasks",n),c=t,_(t),b(t)}});Z(c);b(c);Ft(We());var qt="theme",_e="memoryCue:theme-change",Pe=document.getElementById("theme-menu"),_t="[data-theme-name],[data-theme-option]",Mn=new Set(["dark","dracula","synthwave"]);function M(e){return typeof e=="string"?e.trim():""}function Pt(e){return e instanceof HTMLElement?M(e.getAttribute("data-theme-name")||e.getAttribute("data-theme-option")||""):""}function Nn(e){let t=M(e);t&&(document.documentElement.setAttribute("data-theme",t),document.documentElement.classList.toggle("dark",Mn.has(t)))}function kt(e){let t=M(e);if(t)try{localStorage.setItem(qt,t)}catch(n){console.warn("Unable to save theme preference",n)}}function Ut(e){if(!Pe)return;let t=M(e);Pe.querySelectorAll(_t).forEach(i=>{if(!(i instanceof HTMLElement))return;let s=Pt(i),o=t&&s===t;i.setAttribute("aria-checked",o?"true":"false"),i.classList.toggle("active",o)})}function Hn(e){let t=M(e);if(!(typeof window>"u"||!t))try{window.dispatchEvent(new CustomEvent(_e,{detail:{theme:t}}))}catch{if(typeof document<"u"&&typeof document.createEvent=="function"){let i=document.createEvent("CustomEvent");i.initCustomEvent(_e,!0,!0,{theme:t}),window.dispatchEvent(i)}}}function $t(e,{persist:t=!0,notify:n=!0}={}){let i=M(e);if(!i)return;M(document.documentElement.getAttribute("data-theme"))!==i&&Nn(i),t&&kt(i),Ut(i),n&&Hn(i)}function Rn(){let e="";try{e=localStorage.getItem(qt)||""}catch(n){console.warn("Unable to load theme preference",n)}let t=e||document.documentElement.getAttribute("data-theme")||"";t&&$t(t,{persist:!1,notify:!0})}Pe?.addEventListener("click",e=>{let t=e.target instanceof HTMLElement?e.target.closest(_t):null;if(!t)return;e.preventDefault();let n=Pt(t);n&&$t(n,{persist:!0,notify:!0})});typeof window<"u"&&window.addEventListener(_e,e=>{let t=M(e?.detail?.theme);t&&Ut(t)});Rn()});export default On();
