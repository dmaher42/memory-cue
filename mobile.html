<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memory Cue (Mobile) ‚Äî Inline + Edit + Sync All</title>
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="/manifest.webmanifest" id="manifestLink" />
  <link rel="stylesheet" href="./styles/tokens.css" />
  <link rel="stylesheet" href="./styles/a11y.css" />
  <link rel="stylesheet" href="dist/styles.css" />
  <style>
    .sync-status {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(148, 163, 184, 0.1);
      color: rgb(15 23 42);
      transition: all 0.2s ease;
    }
    .dark .sync-status {
      border-color: rgba(148, 163, 184, 0.35);
      background: rgba(148, 163, 184, 0.15);
      color: rgb(226 232 240);
    }
    .sync-status.online {
      background: rgba(22, 163, 74, 0.12);
      color: rgb(22 163 74);
      border-color: rgba(22, 163, 74, 0.3);
    }
    .dark .sync-status.online {
      background: rgba(34, 197, 94, 0.16);
      color: rgb(187 247 208);
      border-color: rgba(34, 197, 94, 0.4);
    }
    .sync-status.error {
      background: rgba(248, 113, 113, 0.16);
      color: rgb(220 38 38);
      border-color: rgba(248, 113, 113, 0.32);
    }
    .dark .sync-status.error {
      background: rgba(248, 113, 113, 0.22);
      color: rgb(254 205 211);
      border-color: rgba(248, 113, 113, 0.45);
    }
    .notes-editor {
      min-height: 10rem;
      width: 100%;
      border-radius: 0.75rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 0.75rem 1rem;
      background-color: rgba(255, 255, 255, 0.9);
      color: inherit;
      white-space: pre-wrap;
      overflow-wrap: break-word;
      line-height: 1.5;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    .dark .notes-editor {
      border-color: rgba(148, 163, 184, 0.35);
      background-color: rgba(15, 23, 42, 0.65);
    }
    .notes-editor:focus-visible {
      border-color: rgb(37 99 235);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
    }
    .notes-editor:empty::before {
      content: attr(data-placeholder);
      color: rgba(100, 116, 139, 0.7);
    }
    .dark .notes-editor:empty::before {
      color: rgba(148, 163, 184, 0.7);
    }
    .notes-editor ul,
    .notes-editor ol {
      margin: 0.25rem 0 0.25rem 1.25rem;
      padding-left: 0.75rem;
    }
    .notes-editor ul li,
    .notes-editor ol li {
      margin-bottom: 0.25rem;
    }
    .notes-editor--columns {
      column-width: 16rem;
      column-gap: 1.5rem;
    }
  </style>
</head>
<body class="min-h-screen bg-base-200 text-base-content">
  <a class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-50 focus:rounded-full focus:bg-primary focus:px-4 focus:py-2 focus:text-sm focus:font-semibold focus:text-primary-content" href="#mainContent">Skip to main content</a>

  <header class="navbar bg-base-100 sticky top-0 z-50 border-b">
    <div class="flex-1 items-center gap-2">
      <a class="btn btn-ghost text-lg font-semibold" href="#">Memory Cue</a>
      <span
        id="syncStatus"
        class="sync-status"
        role="status"
        aria-live="polite"
        aria-atomic="true"
      >Offline</span>
    </div>
    <div class="flex-none flex flex-col gap-1 text-right">
      <div class="flex justify-end items-center gap-2">
        <img
          id="googleAvatar"
          src=""
          alt=""
          class="hidden h-8 w-8 rounded-full border border-base-300"
        />
        <button id="themeToggle" class="btn btn-ghost" type="button">Theme</button>
        <button id="openSettings" class="btn btn-ghost" type="button">Settings</button>
        <button id="googleSignInBtn" class="btn btn-primary" type="button">Sign in</button>
        <button id="googleSignOutBtn" class="btn btn-ghost hidden" type="button">Sign out</button>
      </div>
      <p id="googleUserName" class="text-xs text-base-content/70"></p>
    </div>
  </header>

  <main id="mainContent" class="max-w-md mx-auto px-4 pb-24 pt-4 space-y-6" tabindex="-1">
    <section class="card bg-base-100 border">
      <div class="card-body gap-4">
        <h2 class="card-title text-base">Create Reminder</h2>
        <label class="form-control w-full">
          <div class="label"><span class="label-text">Reminder</span></div>
          <input
            id="reminderText"
            type="text"
            placeholder="e.g., Call Alex at 3pm"
            class="input input-bordered w-full"
            autocomplete="off"
          />
        </label>

        <label class="form-control w-full">
          <div class="label"><span class="label-text">Notes</span></div>
          <textarea
            id="reminderDetails"
            class="textarea textarea-bordered"
            rows="3"
            placeholder="Optional context for the reminder"
          ></textarea>
        </label>

        <div class="grid grid-cols-2 gap-3">
          <label class="form-control">
            <div class="label"><span class="label-text">Date</span></div>
            <input id="reminderDate" type="date" class="input input-bordered" />
          </label>
          <label class="form-control">
            <div class="label"><span class="label-text">Time</span></div>
            <input id="reminderTime" type="time" class="input input-bordered" />
          </label>
        </div>

        <div id="dateFeedback" class="text-xs text-info"></div>

        <div class="grid grid-cols-2 gap-3">
          <label class="form-control">
            <div class="label"><span class="label-text">Priority</span></div>
            <select id="priority" class="select select-bordered">
              <option value="High">High</option>
              <option value="Medium" selected>Medium</option>
              <option value="Low">Low</option>
            </select>
          </label>
          <label class="form-control">
            <div class="label"><span class="label-text">Category</span></div>
            <input
              id="category"
              class="input input-bordered"
              list="categorySuggestions"
              placeholder="General"
              value="General"
            />
            <datalist id="categorySuggestions">
              <option value="General"></option>
              <option value="General Appointments"></option>
              <option value="Home &amp; Personal"></option>
              <option value="School ‚Äì Appointments/Meetings"></option>
              <option value="School ‚Äì Communication &amp; Families"></option>
              <option value="School ‚Äì Excursions &amp; Events"></option>
              <option value="School ‚Äì Grading &amp; Assessment"></option>
              <option value="School ‚Äì Prep &amp; Resources"></option>
              <option value="School ‚Äì To-Do"></option>
              <option value="Wellbeing &amp; Support"></option>
            </datalist>
          </label>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <button id="voiceBtn" class="btn btn-ghost" type="button" aria-label="Voice input">üéôÔ∏è</button>
          <button id="notifBtn" class="btn btn-ghost" type="button">Enable notifications</button>
          <button id="quickAdd" class="btn btn-outline" type="button">Quick add</button>
        </div>

        <div class="card-actions justify-stretch">
          <button id="saveReminder" class="btn btn-primary w-full" type="button">Save Reminder</button>
          <button id="cancelEditBtn" class="btn btn-outline w-full hidden" type="button">Cancel</button>
        </div>
        <p id="statusMessage" class="text-sm text-base-content/70" role="status" aria-live="polite"></p>
      </div>
    </section>

    <section class="card bg-base-100 border">
      <div class="card-body gap-4">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div class="flex flex-wrap items-center gap-2" role="group" aria-label="Reminder filters">
            <button class="btn btn-xs" type="button" data-filter="today" aria-pressed="true">Today ¬∑ <span id="todayCount">0</span></button>
            <button class="btn btn-xs" type="button" data-filter="overdue">Overdue ¬∑ <span id="overdueCount">0</span></button>
            <button class="btn btn-xs" type="button" data-filter="all">All ¬∑ <span id="totalCountBadge">0</span></button>
            <button class="btn btn-xs" type="button" data-filter="done">Done ¬∑ <span id="completedCount">0</span></button>
          </div>
          <label class="form-control w-full sm:w-auto">
            <div class="label hidden sm:flex"><span class="label-text">Category filter</span></div>
            <select id="categoryFilter" class="select select-bordered select-sm">
              <option value="all" selected>All categories</option>
              <option value="General">General</option>
              <option value="General Appointments">General Appointments</option>
              <option value="Home &amp; Personal">Home &amp; Personal</option>
              <option value="School ‚Äì Appointments/Meetings">School ‚Äì Appointments/Meetings</option>
              <option value="School ‚Äì Communication &amp; Families">School ‚Äì Communication &amp; Families</option>
              <option value="School ‚Äì Excursions &amp; Events">School ‚Äì Excursions &amp; Events</option>
              <option value="School ‚Äì Grading &amp; Assessment">School ‚Äì Grading &amp; Assessment</option>
              <option value="School ‚Äì Prep &amp; Resources">School ‚Äì Prep &amp; Resources</option>
              <option value="School ‚Äì To-Do">School ‚Äì To-Do</option>
              <option value="Wellbeing &amp; Support">Wellbeing &amp; Support</option>
            </select>
          </label>
        </div>

        <label class="form-control">
          <div class="label"><span class="label-text">Search</span></div>
          <input id="searchReminders" type="search" class="input input-bordered" placeholder="Search reminders" />
        </label>
      </div>
    </section>

    <section class="card bg-base-100 border">
      <div class="card-body gap-4" id="remindersWrapper">
        <div id="emptyState" class="hidden text-center text-base-content/60"></div>
        <ul id="reminderList" class="hidden space-y-3"></ul>
        <p class="text-xs text-base-content/60">Total reminders: <span id="totalCount">0</span></p>
      </div>
    </section>

    <section class="card bg-base-100 border">
      <div class="card-body gap-3">
        <h2 class="card-title text-base">Scratch Notes</h2>
        <div
          id="notesToolbar"
          class="flex flex-wrap gap-2"
          role="toolbar"
          aria-label="Scratch notes formatting options"
          aria-controls="notes"
        >
          <button type="button" class="btn btn-xs" data-action="bullets">‚Ä¢ Bullets</button>
          <button type="button" class="btn btn-xs" data-action="numbers">1. Numbers</button>
          <button
            type="button"
            class="btn btn-xs"
            data-action="columns"
            aria-pressed="false"
          >
            Columns
          </button>
        </div>
        <div
          id="notes"
          class="notes-editor"
          contenteditable="true"
          role="textbox"
          aria-multiline="true"
          spellcheck="true"
          data-placeholder="Quick personal notes"
        ></div>
        <div class="flex gap-2">
          <button id="saveNotes" class="btn btn-outline flex-1" type="button">Save notes</button>
          <button id="loadNotes" class="btn btn-outline flex-1" type="button">Load notes</button>
        </div>
      </div>
    </section>

    <section id="settingsSection" class="card bg-base-100 border hidden">
      <div class="card-body gap-4">
        <h2 class="card-title text-base">Sync Settings</h2>
        <p class="text-sm text-base-content/70">Configure your Google Apps Script endpoint to sync reminders to Calendar.</p>
        <label class="form-control">
          <div class="label"><span class="label-text">Apps Script URL</span></div>
          <input id="syncUrl" type="url" class="input input-bordered" placeholder="https://script.google.com/macros/s/.../exec" />
        </label>
        <div class="card-actions flex-col gap-2">
          <div class="flex gap-2 w-full">
            <button id="saveSyncSettings" class="btn btn-outline flex-1" type="button">Save Settings</button>
            <button id="testSync" class="btn btn-outline flex-1" type="button">Test Connection</button>
          </div>
          <button id="syncAll" class="btn btn-primary w-full" type="button">Sync All</button>
        </div>
        <p class="text-xs text-base-content/60">Tip: In Google Apps Script choose <strong>Deploy ‚Üí Web app</strong>, execute as yourself and allow access to anyone with the link.</p>
      </div>
    </section>
  </main>

  <nav class="btm-nav btm-nav-xs fixed bottom-0 left-0 right-0 border-t bg-base-100">
    <button class="active"><span class="btm-nav-label">Reminders</span></button>
    <button><span class="btm-nav-label">Today</span></button>
    <button><span class="btm-nav-label">Notebook</span></button>
  </nav>

  <script>
    (function () {
      const html = document.documentElement;
      const stored = localStorage.getItem('theme');
      if (stored) html.setAttribute('data-theme', stored);
      document.getElementById('themeToggle')?.addEventListener('click', () => {
        const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
      });
    })();
  </script>
  <script type="module" src="./mobile.js"></script>
</body>
</html>
