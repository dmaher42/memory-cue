<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memory Cue (Mobile)</title>
  <meta name="theme-color" content="#0b1220" />
  <link rel="icon" href="icons/icon-192.png" sizes="192x192" />
  <link rel="manifest" href="#" id="manifestLink" />
  <style>
    /* ... existing styles ... */

    /* Header tools menu */
    .menu-wrap { position: relative; margin-left: auto; }
    .menu { position: absolute; right: 0; top: calc(100% + 6px); background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow-md); min-width: 200px; padding: 6px; z-index: 200; }
    .menu.hidden { display: none; }
    .menu-item { width: 100%; text-align: left; background: transparent; border: 0; padding: 10px 12px; border-radius: var(--radius-sm); font-size: var(--text-sm); color: var(--text-primary); }
    .menu-item:hover, .menu-item:focus { background: var(--bg-tertiary); outline: none; }
    .menu-sep { height: 1px; background: var(--border); margin: 6px 0; }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="header-top">
          <h1>Memory Cue</h1>
          <div id="syncStatus" class="sync-status offline" aria-live="polite">Offline</div>
        </div>
        <div class="header-controls">
          <input id="q" class="search-input" placeholder="Search reminders or #tags" aria-label="Search reminders" />
          <button id="voiceBtn" class="btn-ghost btn-compact" type="button">üéôÔ∏è</button>
          <button id="notifBtn" class="btn-ghost btn-compact" type="button">üîî</button>
          <button id="addQuickBtn" class="btn-primary btn-compact" type="button">+</button>
          <div class="menu-wrap">
            <button id="moreBtn" class="btn-ghost btn-compact" aria-haspopup="true" aria-expanded="false" aria-controls="moreMenu" title="More actions" aria-label="More actions">‚ãØ</button>
            <div id="moreMenu" class="menu hidden" role="menu" aria-label="More actions">
              <button id="copyMtlBtn" class="menu-item" role="menuitem">Copy MTL</button>
              <label class="menu-item" role="menuitem" for="importFile" style="display:flex; align-items:center; gap:8px; cursor:pointer;">Import<input id="importFile" type="file" accept="application/json" class="sr-only" /></label>
              <button id="exportBtn" class="menu-item" role="menuitem">Export</button>
              <div class="menu-sep"></div>
              <button id="openSettings" class="menu-item" role="menuitem">Settings</button>
            </div>
          </div>
        </div>
        <!-- Auth controls -->
        <div class="header-controls" style="margin-top: var(--space-2);">
          <button id="googleSignInBtn" class="btn-ghost" type="button">Sign in with Google</button>
          <button id="googleSignOutBtn" class="btn-ghost hidden" type="button">
            <img id="googleAvatar" class="google-avatar hidden" alt="Google avatar" /> Sign out
          </button>
          <div id="googleUserName" class="auth-info"></div>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      <!-- Create Reminder Card -->
      <section class="card section">
        <div class="card-header"><h2 class="card-title">Create Reminder</h2></div>
        <div class="card-content">
          <div class="form-stack">
            <div class="form-group">
              <label class="sr-only" for="title">Reminder</label>
              <input id="title" placeholder="e.g., Pick up dog at 6pm #home" />
            </div>
            <div class="form-row">
              <div class="form-group flex-1"><input id="date" type="date" /></div>
              <div class="form-group flex-1"><input id="time" type="time" /></div>
              <div class="form-group"><select id="priority"><option>High</option><option selected>Medium</option><option>Low</option></select></div>
            </div>
            <button id="saveBtn" class="btn-success" type="button">Save Reminder</button>
          </div>
          <div id="status" class="status-message" aria-live="polite"></div>
        </div>
      </section>
      <!-- other sections unchanged -->
    </div>
  </main>

  <!-- JS unchanged, but add menu toggle logic -->
  <script type="module">
    // ...existing imports...
    const moreBtn = document.querySelector('#moreBtn');
    const moreMenu = document.querySelector('#moreMenu');
    function closeMenu(){ if(moreBtn) moreBtn.setAttribute('aria-expanded','false'); if(moreMenu) moreMenu.classList.add('hidden'); }
    function openMenu(){ if(moreBtn) moreBtn.setAttribute('aria-expanded','true'); if(moreMenu) moreMenu.classList.remove('hidden'); }
    if (moreBtn && moreMenu){
      moreBtn.addEventListener('click', (e)=>{ e.stopPropagation(); const open = moreBtn.getAttribute('aria-expanded')==='true'; open ? closeMenu() : openMenu(); });
      document.addEventListener('click', (e)=>{ if (!moreMenu.classList.contains('hidden')) { if (!moreMenu.contains(e.target) && e.target !== moreBtn) closeMenu(); } });
      document.addEventListener('keydown', (e)=>{ if (e.key==='Escape') closeMenu(); });
    }
    // ...rest of JS...
  </script>
</body>
</html>
